<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-note/os/chroot" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">chroot Usage | Weidong Note</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="http://weidongkl.github.io/en/img/weidongkl.png"><meta data-rh="true" name="twitter:image" content="http://weidongkl.github.io/en/img/weidongkl.png"><meta data-rh="true" property="og:url" content="http://weidongkl.github.io/en/docs/note/os/chroot"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="chroot Usage | Weidong Note"><meta data-rh="true" name="description" content="1. Overview"><meta data-rh="true" property="og:description" content="1. Overview"><link data-rh="true" rel="icon" href="/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="http://weidongkl.github.io/en/docs/note/os/chroot"><link data-rh="true" rel="alternate" href="http://weidongkl.github.io/en/docs/note/os/chroot" hreflang="en"><link data-rh="true" rel="alternate" href="http://weidongkl.github.io/docs/note/os/chroot" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="http://weidongkl.github.io/docs/note/os/chroot" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"OS","item":"http://weidongkl.github.io/en/docs/category/os"},{"@type":"ListItem","position":2,"name":"chroot Usage","item":"http://weidongkl.github.io/en/docs/note/os/chroot"}]}</script><link rel="alternate" type="application/rss+xml" href="/en/blog/rss.xml" title="Weidong Note RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/en/blog/atom.xml" title="Weidong Note Atom Feed"><link rel="stylesheet" href="/en/assets/css/styles.2f4b7bdb.css">
<script src="/en/assets/js/runtime~main.5a911d6e.js" defer="defer"></script>
<script src="/en/assets/js/main.47eae027.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/en/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/en/"><div class="navbar__logo"><img src="/en/img/logo.svg" alt="weidongkl" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/en/img/logo.svg" alt="weidongkl" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">weidongkl</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/en/docs/category/os">Notes</a><a class="navbar__item navbar__link" href="/en/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/en/docs/note/os/chroot" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/docs/note/os/chroot" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li></ul></div><a class="navbar__item navbar__link" href="/en/about">About</a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="fixedBanner_aqMt"></div><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/en/docs/category/os">OS</a><button aria-label="Collapse sidebar category &#x27;OS&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/docs/category/调试工具">Debug Tools</a><button aria-label="Expand sidebar category &#x27;Debug Tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/docs/category/问题定位">Problem Diagnosis</a><button aria-label="Expand sidebar category &#x27;Problem Diagnosis&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/docs/category/容器">Containers</a><button aria-label="Expand sidebar category &#x27;Containers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/en/docs/category/网路">Network</a><button aria-label="Expand sidebar category &#x27;Network&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/en/docs/note/os/chroot">chroot Usage</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/en/docs/note/os/kernel/build_flag">kernel</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/en/docs/note/os/zombie">Zombie Processes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/docs/category/build">Build</a><button aria-label="Expand sidebar category &#x27;Build&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/docs/category/design">Design</a><button aria-label="Expand sidebar category &#x27;Design&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/docs/category/git">Git</a><button aria-label="Expand sidebar category &#x27;Git&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/docs/category/web">web</a><button aria-label="Expand sidebar category &#x27;web&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/en/docs/category/golang">Golang</a><button aria-label="Expand sidebar category &#x27;Golang&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/en/docs/category/os"><span>OS</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">chroot Usage</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1><code>chroot</code> Usage</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-overview">1. <strong>Overview</strong><a href="#1-overview" class="hash-link" aria-label="Direct link to 1-overview" title="Direct link to 1-overview">​</a></h2>
<p><code>chroot</code> is a Linux command used to change the root directory (<code>/</code>) of a process and its child processes to a specified directory. In other words, it changes the program&#x27;s root directory path, making the program unable to access higher-level file systems. It is commonly used for environment isolation, creating sandboxes, system recovery, and other scenarios.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-how-it-works">2. <strong>How It Works</strong><a href="#2-how-it-works" class="hash-link" aria-label="Direct link to 2-how-it-works" title="Direct link to 2-how-it-works">​</a></h2>
<p>When using the <code>chroot</code> command, the specified path becomes the new root directory. When the process runs, file system access will be relative to the new root directory (chroot directory), and other parts of the system will not be visible.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">chroot &lt;new_root&gt; [command]</span><br></span></code></pre></div></div>
<ul>
<li><code>&lt;new_root&gt;</code>: Specifies the new root directory.</li>
<li><code>[command]</code>: Optional command, indicating the command to be executed in the new root directory environment. If no command is specified, an interactive shell will be started by default.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-basic-usage">3. <strong>Basic Usage</strong><a href="#3-basic-usage" class="hash-link" aria-label="Direct link to 3-basic-usage" title="Direct link to 3-basic-usage">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-enter-chroot-environment">3.1. Enter <code>chroot</code> Environment<a href="#31-enter-chroot-environment" class="hash-link" aria-label="Direct link to 31-enter-chroot-environment" title="Direct link to 31-enter-chroot-environment">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo chroot /path/to/new_root</span><br></span></code></pre></div></div>
<p>This command will switch the root directory to <code>/path/to/new_root</code> and start an interactive shell.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="32-execute-commands-in-chroot-environment">3.2. Execute Commands in <code>chroot</code> Environment<a href="#32-execute-commands-in-chroot-environment" class="hash-link" aria-label="Direct link to 32-execute-commands-in-chroot-environment" title="Direct link to 32-execute-commands-in-chroot-environment">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo chroot /path/to/new_root /bin/bash</span><br></span></code></pre></div></div>
<p>Execute <code>/bin/bash</code> in the <code>/path/to/new_root</code> directory and enter a new environment.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-creating-a-basic-chroot-environment">4. <strong>Creating a Basic <code>chroot</code> Environment</strong><a href="#4-creating-a-basic-chroot-environment" class="hash-link" aria-label="Direct link to 4-creating-a-basic-chroot-environment" title="Direct link to 4-creating-a-basic-chroot-environment">​</a></h2>
<ol>
<li><strong>Create New Root Directory</strong></li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo mkdir -p /path/to/new_root</span><br></span></code></pre></div></div>
<ol>
<li><strong>Mount Necessary Virtual File Systems</strong></li>
</ol>
<p>Some system files, such as <code>/proc</code>, need to be mounted in the chroot environment.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo mount -t proc /proc /path/to/new_root/proc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mount -t sysfs /sys /path/to/new_root/sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mount -o bind /dev /path/to/new_root/dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mount -o bind /dev/pts /path/to/new_root/dev/pts</span><br></span></code></pre></div></div>
<blockquote>
<p>Mounting directories such as <code>/proc</code>, <code>/sys</code>, <code>/dev</code>, and <code>/dev/pts</code> is to ensure that processes can correctly access and use these virtual file systems, which provide important system information and device interfaces. Without these mounts, some programs or commands may fail because they depend on files in these directories to obtain system status or interact with hardware.</p>
<p><code>/proc</code> is a virtual file system that provides data about system processes, kernel information, and other runtime information. In a <code>chroot</code> environment, if <code>/proc</code> is not mounted, many programs and commands (such as <code>ps</code>, <code>top</code>, <code>free</code>, etc.) cannot work properly because they depend on information in <code>/proc</code> to obtain status about the current system and processes.</p>
<p><code>/sys</code> is also a virtual file system that provides dynamic information about system hardware, kernel parameters, device status, etc. Many device drivers and system services depend on files in <code>/sys</code> for hardware management and system configuration. Without mounting <code>/sys</code>, some programs may not be able to obtain hardware information or interact with devices.</p>
<p>For example:</p>
<ul>
<li>Number of CPU cores in the system</li>
<li>Network interface configuration</li>
<li>Battery status (on laptops)</li>
</ul>
<p>The <code>/dev</code> directory contains all device files (such as hard drives, terminals, USB devices, etc.). These device files are interfaces for user-space programs to interact with hardware devices. For programs running in a <code>chroot</code> environment, access to device files is necessary.</p>
<p>For example:</p>
<ul>
<li><code>/dev/sda</code>: Hard drive device file</li>
<li><code>/dev/null</code>: Device for discarding data</li>
<li><code>/dev/tty</code>: Terminal device</li>
</ul>
<p>Without mounting <code>/dev</code>, programs cannot access hardware devices or interact with terminals, network interfaces, etc.</p>
<p>The <code>/dev/pts</code> directory is used to manage pseudo-terminal devices (pty). It stores terminal-related device files, such as <code>/dev/pts/0</code>, etc. This is very important for supporting multi-user, multi-terminal systems, especially for environments running interactive shells and command-line programs.</p>
<p>For example, when you use <code>ssh</code> or <code>tmux</code> to log into the system, terminal devices are usually represented through <code>/dev/pts</code>. Without mounting <code>/dev/pts</code>, you will not be able to start or use interactive terminals (such as when executing <code>bash</code> or <code>sh</code> commands in a <code>chroot</code> environment).</p>
</blockquote>
<ol>
<li><strong>Install Necessary Libraries and Commands</strong></li>
</ol>
<p>Ensure that the required libraries and programs are installed in the new root directory. You may need to copy or mount some files to make the chroot environment run normally.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp /bin/bash /path/to/new_root/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp /lib/x86_64-linux-gnu/libtinfo.so.6 /path/to/new_root/lib/x86_64-linux-gnu/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo cp /lib/x86_64-linux-gnu/libc.so.6 /path/to/new_root/lib/x86_64-linux-gnu/</span><br></span></code></pre></div></div>
<ol>
<li><strong>Enter <code>chroot</code> Environment</strong></li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo chroot /path/to/new_root /bin/bash</span><br></span></code></pre></div></div>
<p>At this point, you have entered a new chroot environment with the root directory as <code>/path/to/new_root</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-use-cases">5. <strong>Use Cases</strong><a href="#5-use-cases" class="hash-link" aria-label="Direct link to 5-use-cases" title="Direct link to 5-use-cases">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="51-system-recovery">5.1. <strong>System Recovery</strong><a href="#51-system-recovery" class="hash-link" aria-label="Direct link to 51-system-recovery" title="Direct link to 51-system-recovery">​</a></h3>
<p>When the system cannot start or is damaged, you can use <code>chroot</code> to enter the system and fix problems. For example, enter the system&#x27;s root file system through <code>chroot</code> to reinstall the bootloader or fix damaged files.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">sudo mount /dev/sda1 /mnt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mount --bind /dev /mnt/dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mount --bind /proc /mnt/proc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mount --bind /sys /mnt/sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo chroot /mnt</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="52-isolated-environment-sandbox">5.2. <strong>Isolated Environment (Sandbox)</strong><a href="#52-isolated-environment-sandbox" class="hash-link" aria-label="Direct link to 52-isolated-environment-sandbox" title="Direct link to 52-isolated-environment-sandbox">​</a></h3>
<p><code>chroot</code> can be used to create a restricted environment, limiting a process to only access specific directories. It is commonly used as the foundation implementation of containerization technology, although modern containers use more powerful tools (such as Docker) to provide isolation.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="53-software-package-compilation">5.3. <strong>Software Package Compilation</strong><a href="#53-software-package-compilation" class="hash-link" aria-label="Direct link to 53-software-package-compilation" title="Direct link to 53-software-package-compilation">​</a></h3>
<p>When building specific versions of programs or testing, you can create a clean environment to avoid the influence of existing packages in the system.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="54-running-specific-versions-of-applications">5.4. <strong>Running Specific Versions of Applications</strong><a href="#54-running-specific-versions-of-applications" class="hash-link" aria-label="Direct link to 54-running-specific-versions-of-applications" title="Direct link to 54-running-specific-versions-of-applications">​</a></h3>
<p>If you need to run a specific version of a program, you can use <code>chroot</code> to isolate old versions of libraries and binaries.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-precautions">6. <strong>Precautions</strong><a href="#6-precautions" class="hash-link" aria-label="Direct link to 6-precautions" title="Direct link to 6-precautions">​</a></h2>
<ol>
<li><strong>Permission Issues</strong></li>
</ol>
<p><code>chroot</code> requires sufficient permissions, and usually only root users can perform this operation.</p>
<ol start="2">
<li><strong>Security</strong></li>
</ol>
<p><code>chroot</code> only provides a simple isolation method and cannot completely prevent process escape or access to sensitive information. Stronger security measures (such as using <code>namespaces</code> or <code>containers</code>) should be used for high-security requirement environments.</p>
<ol start="3">
<li><strong>File System Dependencies</strong></li>
</ol>
<p>Some processes require specific system files (such as <code>/dev</code>, <code>/proc</code>, <code>/sys</code>, etc.). If these virtual file systems are not mounted, programs may crash or not work properly.</p>
<ol start="4">
<li><strong>Cannot Escape</strong></li>
</ol>
<p><code>chroot</code> itself cannot prevent processes from escaping from the chroot environment, so it is not recommended to rely solely on <code>chroot</code> for high-security requirement scenarios (such as sandboxes, containers).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-summary">7. <strong>Summary</strong><a href="#7-summary" class="hash-link" aria-label="Direct link to 7-summary" title="Direct link to 7-summary">​</a></h2>
<p><code>chroot</code> is a powerful tool for isolating processes in a specific directory tree. It is very useful in system recovery, isolated testing, build environments, and other aspects. However, it is not a perfect security isolation tool, and modern containerization technologies provide stronger isolation and security.</p>
<hr>
<p>You can expand the content of the document according to your needs, such as adding more detailed security discussions, usage examples, etc.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/weidongkl/weidongkl.github.io/tree/master/docs/note/os/chroot.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-10-10T08:47:12.000Z" itemprop="dateModified">Oct 10, 2025</time></b> by <b>weidongkl</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/en/docs/note/os/network/ssh_tunnel"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">使用SSH 隧道连接网络</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/en/docs/note/os/kernel/build_flag"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Kernel Module Makefile: -y vs -objs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-overview" class="table-of-contents__link toc-highlight">1. <strong>Overview</strong></a></li><li><a href="#2-how-it-works" class="table-of-contents__link toc-highlight">2. <strong>How It Works</strong></a></li><li><a href="#3-basic-usage" class="table-of-contents__link toc-highlight">3. <strong>Basic Usage</strong></a><ul><li><a href="#31-enter-chroot-environment" class="table-of-contents__link toc-highlight">3.1. Enter <code>chroot</code> Environment</a></li><li><a href="#32-execute-commands-in-chroot-environment" class="table-of-contents__link toc-highlight">3.2. Execute Commands in <code>chroot</code> Environment</a></li></ul></li><li><a href="#4-creating-a-basic-chroot-environment" class="table-of-contents__link toc-highlight">4. <strong>Creating a Basic <code>chroot</code> Environment</strong></a></li><li><a href="#5-use-cases" class="table-of-contents__link toc-highlight">5. <strong>Use Cases</strong></a><ul><li><a href="#51-system-recovery" class="table-of-contents__link toc-highlight">5.1. <strong>System Recovery</strong></a></li><li><a href="#52-isolated-environment-sandbox" class="table-of-contents__link toc-highlight">5.2. <strong>Isolated Environment (Sandbox)</strong></a></li><li><a href="#53-software-package-compilation" class="table-of-contents__link toc-highlight">5.3. <strong>Software Package Compilation</strong></a></li><li><a href="#54-running-specific-versions-of-applications" class="table-of-contents__link toc-highlight">5.4. <strong>Running Specific Versions of Applications</strong></a></li></ul></li><li><a href="#6-precautions" class="table-of-contents__link toc-highlight">6. <strong>Precautions</strong></a></li><li><a href="#7-summary" class="table-of-contents__link toc-highlight">7. <strong>Summary</strong></a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 weidongkl, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>