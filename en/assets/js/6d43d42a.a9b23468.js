"use strict";(self.webpackChunkweidongkl_github_io=self.webpackChunkweidongkl_github_io||[]).push([[6077],{45522:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>t,frontMatter:()=>r,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"note/build/makefile_function","title":"Makefile \u5e38\u7528\u65b9\u6cd5","description":"info/warning","source":"@site/docs/note/build/makefile_function.md","sourceDirName":"note/build","slug":"/note/build/makefile_function","permalink":"/en/docs/note/build/makefile_function","draft":false,"unlisted":false,"editUrl":"https://github.com/weidongkl/weidongkl.github.io/tree/master/docs/note/build/makefile_function.md","tags":[],"version":"current","lastUpdatedBy":"weidongkl","lastUpdatedAt":1762677760000,"frontMatter":{},"sidebar":"note","previous":{"title":"Makefile \u4e2d : \u548c :: \u7684\u4f7f\u7528\u6307\u5357","permalink":"/en/docs/note/build/makefile:"},"next":{"title":"Design","permalink":"/en/docs/category/design"}}');var d=l(74848),s=l(28453);const r={},a="Makefile \u5e38\u7528\u65b9\u6cd5",c={},h=[{value:"info/warning",id:"infowarning",level:2},{value:"\u529f\u80fd\uff1a",id:"\u529f\u80fd",level:3},{value:"\u8c03\u8bd5\uff1a",id:"\u8c03\u8bd5",level:3},{value:"\u793a\u4f8b\uff1a",id:"\u793a\u4f8b",level:3},{value:"subst",id:"subst",level:2},{value:"\u529f\u80fd\uff1a",id:"\u529f\u80fd-1",level:3},{value:"\u7528\u6cd5\uff1a",id:"\u7528\u6cd5",level:3},{value:"\u793a\u4f8b\uff1a",id:"\u793a\u4f8b-1",level:3},{value:"wildcard",id:"wildcard",level:2},{value:"\u529f\u80fd\uff1a",id:"\u529f\u80fd-2",level:3},{value:"\u7528\u6cd5\uff1a",id:"\u7528\u6cd5-1",level:3},{value:"\u793a\u4f8b\uff1a",id:"\u793a\u4f8b-2",level:3},{value:"patsubst",id:"patsubst",level:2},{value:"\u529f\u80fd\uff1a",id:"\u529f\u80fd-3",level:3},{value:"\u7528\u6cd5\uff1a",id:"\u7528\u6cd5-2",level:3},{value:"\u533a\u522b\uff1a",id:"\u533a\u522b",level:3},{value:"\u793a\u4f8b\uff1a",id:"\u793a\u4f8b-3",level:3},{value:"addsuffix",id:"addsuffix",level:2},{value:"\u529f\u80fd\uff1a",id:"\u529f\u80fd-4",level:3},{value:"\u7528\u6cd5\uff1a",id:"\u7528\u6cd5-3",level:3},{value:"\u793a\u4f8b\uff1a",id:"\u793a\u4f8b-4",level:3},{value:"basename",id:"basename",level:2},{value:"\u529f\u80fd\uff1a",id:"\u529f\u80fd-5",level:3},{value:"\u7528\u6cd5\uff1a",id:"\u7528\u6cd5-4",level:3},{value:"\u793a\u4f8b\uff1a",id:"\u793a\u4f8b-5",level:3},{value:"firstword",id:"firstword",level:2},{value:"\u529f\u80fd\uff1a",id:"\u529f\u80fd-6",level:3},{value:"\u7528\u6cd5\uff1a",id:"\u7528\u6cd5-5",level:3},{value:"\u793a\u4f8b\uff1a",id:"\u793a\u4f8b-6",level:3},{value:"strip",id:"strip",level:2},{value:"\u529f\u80fd\uff1a",id:"\u529f\u80fd-7",level:3},{value:"\u7528\u6cd5\uff1a",id:"\u7528\u6cd5-6",level:3},{value:"\u793a\u4f8b\uff1a",id:"\u793a\u4f8b-7",level:3},{value:"word",id:"word",level:2},{value:"\u529f\u80fd\uff1a",id:"\u529f\u80fd-8",level:3},{value:"\u7528\u6cd5\uff1a",id:"\u7528\u6cd5-7",level:3},{value:"\u793a\u4f8b\uff1a",id:"\u793a\u4f8b-8",level:3}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"makefile-\u5e38\u7528\u65b9\u6cd5",children:"Makefile \u5e38\u7528\u65b9\u6cd5"})}),"\n",(0,d.jsx)(n.h2,{id:"infowarning",children:"info/warning"}),"\n",(0,d.jsx)(n.h3,{id:"\u529f\u80fd",children:"\u529f\u80fd\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u7528\u4e8e\u6253\u5370\u8c03\u8bd5\u4fe1\u606f\u3002"}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"info"})," \u6253\u5370\u5185\u5bb9\uff0c",(0,d.jsx)(n.code,{children:"warning"})," \u6253\u5370\u5185\u5bb9\u5e76\u9644\u52a0\u884c\u53f7\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u8c03\u8bd5",children:"\u8c03\u8bd5\uff1a"}),"\n",(0,d.jsxs)(n.p,{children:["\u53ef\u4ee5\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"make -n"})," \u6765\u6253\u5370\u547d\u4ee4\u4f46\u4e0d\u6267\u884c\uff0c\u4ece\u800c\u5e2e\u52a9\u8c03\u8bd5\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b",children:"\u793a\u4f8b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(warning $(LANGUAGES))  # 29\u884c\n$(info $(LANGUAGES))     # 30\u884c\n$(warning xxx)           # 31\u884c\n$ make -n\nMakefile:29: zh wd\nzh wd\nMakefile:31: xxx\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"subst",children:"subst"}),"\n",(0,d.jsx)(n.h3,{id:"\u529f\u80fd-1",children:"\u529f\u80fd\uff1a"}),"\n",(0,d.jsxs)(n.p,{children:["\u6267\u884c\u6587\u672c\u66ff\u6362\uff1a\u5c06\u6587\u672c\u4e2d\u6240\u6709\u51fa\u73b0\u7684 ",(0,d.jsx)(n.code,{children:"from"})," \u66ff\u6362\u4e3a ",(0,d.jsx)(n.code,{children:"to"}),"\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"\u7528\u6cd5",children:"\u7528\u6cd5\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(subst from,to,text)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-1",children:"\u793a\u4f8b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(subst ee,EE,feet on the street)\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u8f93\u51fa\uff1a",(0,d.jsx)(n.code,{children:"fEEt on the strEEt"})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"wildcard",children:"wildcard"}),"\n",(0,d.jsx)(n.h3,{id:"\u529f\u80fd-2",children:"\u529f\u80fd\uff1a"}),"\n",(0,d.jsxs)(n.p,{children:["\u901a\u8fc7\u901a\u914d\u7b26\u8fd4\u56de\u6587\u4ef6\u5217\u8868\uff0c\u7c7b\u4f3c\u4e8e Python \u7684 ",(0,d.jsx)(n.code,{children:"glob"}),"\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"\u7528\u6cd5-1",children:"\u7528\u6cd5\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(wildcard pattern)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-2",children:"\u793a\u4f8b\uff1a"}),"\n",(0,d.jsxs)(n.p,{children:["\u83b7\u53d6 ",(0,d.jsx)(n.code,{children:"po"})," \u76ee\u5f55\u4e0b\u6240\u6709\u4ee5 ",(0,d.jsx)(n.code,{children:".po"})," \u7ed3\u5c3e\u7684\u6587\u4ef6\uff1a"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(warning $(wildcard po/*.po))\n# Makefile:20: po/zh.po po/wd.po\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"patsubst",children:"patsubst"}),"\n",(0,d.jsx)(n.h3,{id:"\u529f\u80fd-3",children:"\u529f\u80fd\uff1a"}),"\n",(0,d.jsxs)(n.p,{children:["\u66ff\u6362\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"%"})," \u901a\u914d\u7b26\uff0c\u652f\u6301\u6a21\u5f0f\u66ff\u6362\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"\u7528\u6cd5-2",children:"\u7528\u6cd5\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(patsubst pattern,replacement,text)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u533a\u522b",children:"\u533a\u522b\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"subst"})," \u4ec5\u652f\u6301\u5b8c\u5168\u5339\u914d\u66ff\u6362\u3002"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"patsubst"})," \u652f\u6301\u6a21\u5f0f\u5339\u914d\u3002"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-3",children:"\u793a\u4f8b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"text := Hello, world!\nresult := $(subst world,Makefile,$(text))\n\nall:\n    @echo $(result)  # \u8f93\u51fa: Hello, Makefile!\nfiles := src/foo.c src/bar.c src/baz.c\nobjects := $(patsubst src/%.c,build/%.o,$(files))\n\nall:\n    @echo $(objects)  # \u8f93\u51fa: build/foo.o build/bar.o build/baz.o\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"addsuffix",children:"addsuffix"}),"\n",(0,d.jsx)(n.h3,{id:"\u529f\u80fd-4",children:"\u529f\u80fd\uff1a"}),"\n",(0,d.jsx)(n.p,{children:"\u4e3a\u6bcf\u4e2a\u6587\u4ef6\u540d\u6dfb\u52a0\u540e\u7f00\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u7528\u6cd5-3",children:"\u7528\u6cd5\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(addsuffix suffix, names...)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-4",children:"\u793a\u4f8b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(addsuffix .c,foo bar)\n"})}),"\n",(0,d.jsxs)(n.p,{children:["\u8fd4\u56de\u503c\uff1a",(0,d.jsx)(n.code,{children:"foo.c bar.c"})]}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"basename",children:"basename"}),"\n",(0,d.jsx)(n.h3,{id:"\u529f\u80fd-5",children:"\u529f\u80fd\uff1a"}),"\n",(0,d.jsxs)(n.p,{children:["\u4ece\u6587\u4ef6\u540d\u4e2d\u63d0\u53d6\u524d\u7f00\u90e8\u5206\uff08\u5373\u70b9\u53f7 ",(0,d.jsx)(n.code,{children:"."})," \u4e4b\u524d\u7684\u90e8\u5206\uff09\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"\u7528\u6cd5-4",children:"\u7528\u6cd5\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(basename names...)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-5",children:"\u793a\u4f8b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(basename src/foo.c src-1.0/bar.c /home/jack/.font.cache-1 hacks)\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u63d0\u53d6\u6587\u4ef6\u540d\u548c\u53bb\u6389\u540e\u7f00\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:'filepath := src/foo.c\n\n# \u63d0\u53d6\u6587\u4ef6\u540d\nfilename := $(notdir $(filepath))\n\n# \u53bb\u6389\u540e\u7f00\nname_without_ext := $(basename $(filename))\n\nall:\n    @echo "Filename: $(filename)"  # \u8f93\u51fa: foo.c\n    @echo "Name without extension: $(name_without_ext)"  # \u8f93\u51fa: foo\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"firstword",children:"firstword"}),"\n",(0,d.jsx)(n.h3,{id:"\u529f\u80fd-6",children:"\u529f\u80fd\uff1a"}),"\n",(0,d.jsx)(n.p,{children:"\u4ece\u5b57\u7b26\u4e32\u4e2d\u63d0\u53d6\u7b2c\u4e00\u4e2a\u5355\u8bcd\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u7528\u6cd5-5",children:"\u7528\u6cd5\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(firstword text)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-6",children:"\u793a\u4f8b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"words := foo bar baz\nfirst := $(firstword $(words))\n\nall:\n    @echo $(first)  # \u8f93\u51fa: foo\n"})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"strip",children:"strip"}),"\n",(0,d.jsx)(n.h3,{id:"\u529f\u80fd-7",children:"\u529f\u80fd\uff1a"}),"\n",(0,d.jsx)(n.p,{children:"\u53bb\u9664\u5b57\u7b26\u4e32\u5f00\u5934\u548c\u7ed3\u5c3e\u7684\u7a7a\u683c\u3002"}),"\n",(0,d.jsx)(n.h3,{id:"\u7528\u6cd5-6",children:"\u7528\u6cd5\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(strip text)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-7",children:"\u793a\u4f8b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:'text :=   foo bar baz   \nstripped := $(strip $(text))\n\nall:\n    @echo "$(stripped)"  # \u8f93\u51fa: foo bar baz\n'})}),"\n",(0,d.jsx)(n.hr,{}),"\n",(0,d.jsx)(n.h2,{id:"word",children:"word"}),"\n",(0,d.jsx)(n.h3,{id:"\u529f\u80fd-8",children:"\u529f\u80fd\uff1a"}),"\n",(0,d.jsxs)(n.p,{children:["\u63d0\u53d6\u5b57\u7b26\u4e32\u4e2d\u7684\u7b2c ",(0,d.jsx)(n.code,{children:"N"})," \u4e2a\u5355\u8bcd\uff08\u5355\u8bcd\u4ee5\u7a7a\u683c\u5206\u9694\uff09\u3002"]}),"\n",(0,d.jsx)(n.h3,{id:"\u7528\u6cd5-7",children:"\u7528\u6cd5\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"$(word N,text)\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u793a\u4f8b-8",children:"\u793a\u4f8b\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-makefile",children:"words := foo bar baz\nsecond_word := $(word 2,$(words))\n\nall:\n    @echo $(second_word)  # \u8f93\u51fa: bar\n"})})]})}function t(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(o,{...e})}):o(e)}},28453:(e,n,l)=>{l.d(n,{R:()=>r,x:()=>a});var i=l(96540);const d={},s=i.createContext(d);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);