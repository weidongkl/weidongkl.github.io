"use strict";(self.webpackChunkweidongkl_github_io=self.webpackChunkweidongkl_github_io||[]).push([[8539],{6400:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>x});const s=JSON.parse('{"id":"note/golang/syscall","title":"Golang sys/unix syscall","description":"1. \u7b80\u4ecb","source":"@site/docs/note/golang/syscall.md","sourceDirName":"note/golang","slug":"/note/golang/syscall","permalink":"/en/docs/note/golang/syscall","draft":false,"unlisted":false,"editUrl":"https://github.com/weidongkl/weidongkl.github.io/tree/master/docs/note/golang/syscall.md","tags":[],"version":"current","lastUpdatedBy":"weidongkl","lastUpdatedAt":1749435559000,"frontMatter":{},"sidebar":"note","previous":{"title":"Go sync.Pool \u7528\u6cd5\u6587\u6863","permalink":"/en/docs/note/golang/sync_pool"},"next":{"title":"Golang Validator","permalink":"/en/docs/note/golang/validator"}}');var l=i(4848),r=i(8453);const d={},t="Golang sys/unix syscall",c={},x=[{value:"1. \u7b80\u4ecb",id:"1-\u7b80\u4ecb",level:2},{value:"2. \u5b89\u88c5",id:"2-\u5b89\u88c5",level:2},{value:"3. \u5e38\u89c1 Golang <code>golang.org/x/sys/unix</code>",id:"3-\u5e38\u89c1-golang-golangorgxsysunix",level:2},{value:"1. \u7b80\u4ecb",id:"1-\u7b80\u4ecb-1",level:2},{value:"2. \u5b89\u88c5",id:"2-\u5b89\u88c5-1",level:2},{value:"3. \u5e38\u89c1 <code>unix</code> \u7528\u6cd5",id:"3-\u5e38\u89c1-unix-\u7528\u6cd5",level:2},{value:"3.1 \u83b7\u53d6\u8fdb\u7a0b ID",id:"31-\u83b7\u53d6\u8fdb\u7a0b-id",level:3},{value:"3.2 \u6587\u4ef6\u64cd\u4f5c",id:"32-\u6587\u4ef6\u64cd\u4f5c",level:3},{value:"3.2.1 \u4f7f\u7528 <code>unix.Open</code> \u8bfb\u53d6\u6587\u4ef6",id:"321-\u4f7f\u7528-unixopen-\u8bfb\u53d6\u6587\u4ef6",level:4},{value:"3.3 \u8fdb\u7a0b\u63a7\u5236",id:"33-\u8fdb\u7a0b\u63a7\u5236",level:3},{value:"3.3.1 \u521b\u5efa\u5b50\u8fdb\u7a0b",id:"331-\u521b\u5efa\u5b50\u8fdb\u7a0b",level:4},{value:"3.4 \u4fe1\u53f7\u5904\u7406",id:"34-\u4fe1\u53f7\u5904\u7406",level:3},{value:"3.4.1 \u53d1\u9001\u4fe1\u53f7",id:"341-\u53d1\u9001\u4fe1\u53f7",level:4},{value:"3.5 \u5185\u5b58\u7ba1\u7406",id:"35-\u5185\u5b58\u7ba1\u7406",level:3},{value:"3.5.1 <code>mmap</code> \u6620\u5c04\u6587\u4ef6",id:"351-mmap-\u6620\u5c04\u6587\u4ef6",level:4},{value:"4. <code>unix</code> \u4f5c\u4e3a <code>syscall</code> \u7684\u66ff\u4ee3\u65b9\u6848",id:"4-unix-\u4f5c\u4e3a-syscall-\u7684\u66ff\u4ee3\u65b9\u6848",level:2},{value:"5. \u7ed3\u8bba",id:"5-\u7ed3\u8bba",level:2},{value:"6. \u53c2\u8003",id:"6-\u53c2\u8003",level:3},{value:"** <code>unix</code> \u7528\u6cd5**",id:"-unix-\u7528\u6cd5",level:2},{value:"<strong>3.1 \u83b7\u53d6\u8fdb\u7a0b ID</strong>",id:"31-\u83b7\u53d6\u8fdb\u7a0b-id-1",level:3},{value:"<strong>3.2 \u6587\u4ef6\u64cd\u4f5c</strong>",id:"32-\u6587\u4ef6\u64cd\u4f5c-1",level:3},{value:"<strong>3.2.1 \u4f7f\u7528 <code>unix.Open</code> \u8bfb\u53d6\u6587\u4ef6</strong>",id:"321-\u4f7f\u7528-unixopen-\u8bfb\u53d6\u6587\u4ef6-1",level:4},{value:"<strong>3.3 \u8fdb\u7a0b\u63a7\u5236</strong>",id:"33-\u8fdb\u7a0b\u63a7\u5236-1",level:3},{value:"<strong>3.3.1 \u521b\u5efa\u5b50\u8fdb\u7a0b</strong>",id:"331-\u521b\u5efa\u5b50\u8fdb\u7a0b-1",level:4},{value:"<strong>3.4 \u4fe1\u53f7\u5904\u7406</strong>",id:"34-\u4fe1\u53f7\u5904\u7406-1",level:3},{value:"<strong>3.4.1 \u53d1\u9001\u4fe1\u53f7</strong>",id:"341-\u53d1\u9001\u4fe1\u53f7-1",level:4},{value:"<strong>3.5 \u5185\u5b58\u7ba1\u7406</strong>",id:"35-\u5185\u5b58\u7ba1\u7406-1",level:3},{value:"<strong>3.5.1 <code>mmap</code> \u6620\u5c04\u6587\u4ef6</strong>",id:"351-mmap-\u6620\u5c04\u6587\u4ef6-1",level:4},{value:"<strong>4. <code>unix</code> \u4f5c\u4e3a <code>syscall</code> \u7684\u66ff\u4ee3\u65b9\u6848</strong>",id:"4-unix-\u4f5c\u4e3a-syscall-\u7684\u66ff\u4ee3\u65b9\u6848-1",level:2},{value:"<strong>5. \u7ed3\u8bba</strong>",id:"5-\u7ed3\u8bba-1",level:2},{value:"<strong>6. \u53c2\u8003</strong>",id:"6-\u53c2\u8003-1",level:3}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsxs)(e.h1,{id:"golang-sysunix-syscall",children:["Golang ",(0,l.jsx)(e.code,{children:"sys/unix syscall"})]})}),"\n",(0,l.jsx)(e.h2,{id:"1-\u7b80\u4ecb",children:"1. \u7b80\u4ecb"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"golang.org/x/sys/unix"})," \u662f Go \u5b98\u65b9\u63d0\u4f9b\u7684\u4e00\u4e2a\u6269\u5c55\u5305\uff0c\u4e13\u95e8\u7528\u4e8e\u6267\u884c Unix/Linux \u76f8\u5173\u7684\u7cfb\u7edf\u8c03\u7528\u3002\u5b83\u662f ",(0,l.jsx)(e.code,{children:"syscall"})," \u5305\u7684\u66ff\u4ee3\u65b9\u6848\uff0c\u63d0\u4f9b\u66f4\u4e30\u5bcc\u7684\u529f\u80fd\uff0c\u5e76\u4fdd\u6301\u6301\u7eed\u7ef4\u62a4\u548c\u66f4\u65b0\u3002"]}),"\n",(0,l.jsx)(e.h2,{id:"2-\u5b89\u88c5",children:"2. \u5b89\u88c5"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"sys"})," \u4e0d\u662f Go \u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\uff0c\u9700\u8981\u624b\u52a8\u5b89\u88c5\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"go get golang.org/x/sys/unix\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.h2,{id:"3-\u5e38\u89c1-golang-golangorgxsysunix",children:["3. \u5e38\u89c1 Golang ",(0,l.jsx)(e.code,{children:"golang.org/x/sys/unix"})]}),"\n",(0,l.jsx)(e.h2,{id:"1-\u7b80\u4ecb-1",children:"1. \u7b80\u4ecb"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"golang.org/x/sys/unix"})," \u662f Go \u5b98\u65b9\u63d0\u4f9b\u7684\u4e00\u4e2a\u6269\u5c55\u5305\uff0c\u4e13\u95e8\u7528\u4e8e\u6267\u884c Unix/Linux \u76f8\u5173\u7684\u7cfb\u7edf\u8c03\u7528\u3002\u5b83\u662f ",(0,l.jsx)(e.code,{children:"syscall"})," \u5305\u7684\u66ff\u4ee3\u65b9\u6848\uff0c\u63d0\u4f9b\u66f4\u4e30\u5bcc\u7684\u529f\u80fd\uff0c\u5e76\u4fdd\u6301\u6301\u7eed\u7ef4\u62a4\u548c\u66f4\u65b0\u3002"]}),"\n",(0,l.jsx)(e.h2,{id:"2-\u5b89\u88c5-1",children:"2. \u5b89\u88c5"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"sys"})," \u4e0d\u662f Go \u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\uff0c\u9700\u8981\u624b\u52a8\u5b89\u88c5\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-sh",children:"go get golang.org/x/sys/unix\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.h2,{id:"3-\u5e38\u89c1-unix-\u7528\u6cd5",children:["3. \u5e38\u89c1 ",(0,l.jsx)(e.code,{children:"unix"})," \u7528\u6cd5"]}),"\n",(0,l.jsx)(e.h3,{id:"31-\u83b7\u53d6\u8fdb\u7a0b-id",children:"3.1 \u83b7\u53d6\u8fdb\u7a0b ID"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"golang.org/x/sys/unix"\n)\n\nfunc main() {\n\tpid := unix.Getpid()\n\tfmt.Println("\u5f53\u524d\u8fdb\u7a0b ID:", pid)\n\n\tppid := unix.Getppid()\n\tfmt.Println("\u7236\u8fdb\u7a0b ID:", ppid)\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"32-\u6587\u4ef6\u64cd\u4f5c",children:"3.2 \u6587\u4ef6\u64cd\u4f5c"}),"\n",(0,l.jsxs)(e.h4,{id:"321-\u4f7f\u7528-unixopen-\u8bfb\u53d6\u6587\u4ef6",children:["3.2.1 \u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"unix.Open"})," \u8bfb\u53d6\u6587\u4ef6"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"golang.org/x/sys/unix"\n)\n\nfunc main() {\n\tfd, err := unix.Open("test.txt", unix.O_RDONLY, 0)\n\tif err != nil {\n\t\tfmt.Println("\u6253\u5f00\u6587\u4ef6\u5931\u8d25:", err)\n\t\treturn\n\t}\n\tdefer unix.Close(fd)\n\n\tvar buf [100]byte\n\tn, err := unix.Read(fd, buf[:])\n\tif err != nil {\n\t\tfmt.Println("\u8bfb\u53d6\u6587\u4ef6\u5931\u8d25:", err)\n\t\treturn\n\t}\n\tfmt.Println("\u6587\u4ef6\u5185\u5bb9:", string(buf[:n]))\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"33-\u8fdb\u7a0b\u63a7\u5236",children:"3.3 \u8fdb\u7a0b\u63a7\u5236"}),"\n",(0,l.jsx)(e.h4,{id:"331-\u521b\u5efa\u5b50\u8fdb\u7a0b",children:"3.3.1 \u521b\u5efa\u5b50\u8fdb\u7a0b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"golang.org/x/sys/unix"\n)\n\nfunc main() {\n\tbinary := "/bin/ls"\n\targs := []string{"ls", "-l"}\n\n\terr := unix.Exec(binary, args, nil)\n\tif err != nil {\n\t\tfmt.Println("\u6267\u884c\u5931\u8d25:", err)\n\t}\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"34-\u4fe1\u53f7\u5904\u7406",children:"3.4 \u4fe1\u53f7\u5904\u7406"}),"\n",(0,l.jsx)(e.h4,{id:"341-\u53d1\u9001\u4fe1\u53f7",children:"3.4.1 \u53d1\u9001\u4fe1\u53f7"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"golang.org/x/sys/unix"\n\t"time"\n)\n\nfunc main() {\n\tpid := unix.Getpid()\n\tfmt.Println("\u5f53\u524d\u8fdb\u7a0b ID:", pid)\n\n\tgo func() {\n\t\ttime.Sleep(2 * time.Second)\n\t\tunix.Kill(pid, unix.SIGTERM)\n\t}()\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"35-\u5185\u5b58\u7ba1\u7406",children:"3.5 \u5185\u5b58\u7ba1\u7406"}),"\n",(0,l.jsxs)(e.h4,{id:"351-mmap-\u6620\u5c04\u6587\u4ef6",children:["3.5.1 ",(0,l.jsx)(e.code,{children:"mmap"})," \u6620\u5c04\u6587\u4ef6"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"os"\n\t"golang.org/x/sys/unix"\n\t"unsafe"\n)\n\nfunc main() {\n\tfile, err := os.OpenFile("test.txt", os.O_RDWR, 0666)\n\tif err != nil {\n\t\tfmt.Println("\u6253\u5f00\u6587\u4ef6\u5931\u8d25:", err)\n\t\treturn\n\t}\n\tdefer file.Close()\n\n\tfi, _ := file.Stat()\n\tsize := fi.Size()\n\n\tdata, err := unix.Mmap(int(file.Fd()), 0, int(size), unix.PROT_READ, unix.MAP_SHARED)\n\tif err != nil {\n\t\tfmt.Println("mmap \u5931\u8d25:", err)\n\t\treturn\n\t}\n\n\tfmt.Println("\u6587\u4ef6\u5185\u5bb9:", *(*string)(unsafe.Pointer(&data)))\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.h2,{id:"4-unix-\u4f5c\u4e3a-syscall-\u7684\u66ff\u4ee3\u65b9\u6848",children:["4. ",(0,l.jsx)(e.code,{children:"unix"})," \u4f5c\u4e3a ",(0,l.jsx)(e.code,{children:"syscall"})," \u7684\u66ff\u4ee3\u65b9\u6848"]}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u529f\u80fd"}),(0,l.jsxs)(e.th,{children:[(0,l.jsx)(e.code,{children:"syscall"})," (\u5df2\u5e9f\u5f03)"]}),(0,l.jsxs)(e.th,{children:[(0,l.jsx)(e.code,{children:"x/sys/unix"})," (\u63a8\u8350)"]})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u8fdb\u7a0b\u7ba1\u7406"}),(0,l.jsx)(e.td,{children:"\u2705"}),(0,l.jsx)(e.td,{children:"\u2705"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u6587\u4ef6\u64cd\u4f5c"}),(0,l.jsx)(e.td,{children:"\u2705"}),(0,l.jsx)(e.td,{children:"\u2705"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u4fe1\u53f7\u5904\u7406"}),(0,l.jsx)(e.td,{children:"\u2705"}),(0,l.jsx)(e.td,{children:"\u2705"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u517c\u5bb9\u6027"}),(0,l.jsx)(e.td,{children:"\u274c \u4ec5\u9650 Linux/macOS/Windows"}),(0,l.jsx)(e.td,{children:"\u2705 \u8de8\u5e73\u53f0\u66f4\u597d"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u672a\u6765\u7ef4\u62a4"}),(0,l.jsx)(e.td,{children:"\u274c \u505c\u6b62\u7ef4\u62a4"}),(0,l.jsx)(e.td,{children:"\u2705 \u63a8\u8350\u4f7f\u7528"})]})]})]}),"\n",(0,l.jsxs)(e.p,{children:["\u793a\u4f8b\uff08",(0,l.jsx)(e.code,{children:"x/sys/unix"})," \u66ff\u4ee3 ",(0,l.jsx)(e.code,{children:"syscall"}),"\uff09\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'import "golang.org/x/sys/unix"\n\nfunc main() {\n\tunix.Getpid()  // \u66ff\u4ee3 syscall.Getpid()\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"5-\u7ed3\u8bba",children:"5. \u7ed3\u8bba"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsxs)(e.strong,{children:[(0,l.jsx)(e.code,{children:"syscall"})," \u9002\u7528\u4e8e\u4f4e\u7ea7\u7cfb\u7edf\u8c03\u7528"]}),"\uff0c\u4f46\u5df2\u88ab\u5e9f\u5f03\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsxs)(e.strong,{children:["\u5efa\u8bae\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"golang.org/x/sys/unix"})]}),"\uff0c\u56e0\u4e3a ",(0,l.jsx)(e.code,{children:"syscall"})," \u4e0d\u518d\u7ef4\u62a4\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u9002\u7528\u4e8e\u9700\u8981\u76f4\u63a5\u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90"}),"\uff08\u5982 ",(0,l.jsx)(e.code,{children:"mmap"}),"\u3001",(0,l.jsx)(e.code,{children:"fork"}),"\u3001",(0,l.jsx)(e.code,{children:"exec"}),"\u3001",(0,l.jsx)(e.code,{children:"signal"}),"\uff09\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4e0d\u9002\u7528\u4e8e\u4e00\u822c\u5e94\u7528\u5f00\u53d1"}),"\uff0cGo \u63d0\u4f9b\u7684\u6807\u51c6\u5e93 ",(0,l.jsx)(e.code,{children:"os"}),"\u3001",(0,l.jsx)(e.code,{children:"io"}),"\u3001",(0,l.jsx)(e.code,{children:"net"})," \u8db3\u591f\u5927\u591a\u6570\u573a\u666f\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"6-\u53c2\u8003",children:"6. \u53c2\u8003"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://pkg.go.dev/golang.org/x/sys/unix",children:"\u5b98\u65b9\u6587\u6863"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/golang/sys",children:"GitHub \u4ee3\u7801\u5e93"})}),"\n"]}),"\n",(0,l.jsxs)(e.h2,{id:"-unix-\u7528\u6cd5",children:["** ",(0,l.jsx)(e.code,{children:"unix"})," \u7528\u6cd5**"]}),"\n",(0,l.jsx)(e.h3,{id:"31-\u83b7\u53d6\u8fdb\u7a0b-id-1",children:(0,l.jsx)(e.strong,{children:"3.1 \u83b7\u53d6\u8fdb\u7a0b ID"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"golang.org/x/sys/unix"\n)\n\nfunc main() {\n\tpid := unix.Getpid()\n\tfmt.Println("\u5f53\u524d\u8fdb\u7a0b ID:", pid)\n\n\tppid := unix.Getppid()\n\tfmt.Println("\u7236\u8fdb\u7a0b ID:", ppid)\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"32-\u6587\u4ef6\u64cd\u4f5c-1",children:(0,l.jsx)(e.strong,{children:"3.2 \u6587\u4ef6\u64cd\u4f5c"})}),"\n",(0,l.jsx)(e.h4,{id:"321-\u4f7f\u7528-unixopen-\u8bfb\u53d6\u6587\u4ef6-1",children:(0,l.jsxs)(e.strong,{children:["3.2.1 \u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"unix.Open"})," \u8bfb\u53d6\u6587\u4ef6"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"golang.org/x/sys/unix"\n)\n\nfunc main() {\n\tfd, err := unix.Open("test.txt", unix.O_RDONLY, 0)\n\tif err != nil {\n\t\tfmt.Println("\u6253\u5f00\u6587\u4ef6\u5931\u8d25:", err)\n\t\treturn\n\t}\n\tdefer unix.Close(fd)\n\n\tvar buf [100]byte\n\tn, err := unix.Read(fd, buf[:])\n\tif err != nil {\n\t\tfmt.Println("\u8bfb\u53d6\u6587\u4ef6\u5931\u8d25:", err)\n\t\treturn\n\t}\n\tfmt.Println("\u6587\u4ef6\u5185\u5bb9:", string(buf[:n]))\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"33-\u8fdb\u7a0b\u63a7\u5236-1",children:(0,l.jsx)(e.strong,{children:"3.3 \u8fdb\u7a0b\u63a7\u5236"})}),"\n",(0,l.jsx)(e.h4,{id:"331-\u521b\u5efa\u5b50\u8fdb\u7a0b-1",children:(0,l.jsx)(e.strong,{children:"3.3.1 \u521b\u5efa\u5b50\u8fdb\u7a0b"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"golang.org/x/sys/unix"\n)\n\nfunc main() {\n\tbinary := "/bin/ls"\n\targs := []string{"ls", "-l"}\n\n\terr := unix.Exec(binary, args, nil)\n\tif err != nil {\n\t\tfmt.Println("\u6267\u884c\u5931\u8d25:", err)\n\t}\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"34-\u4fe1\u53f7\u5904\u7406-1",children:(0,l.jsx)(e.strong,{children:"3.4 \u4fe1\u53f7\u5904\u7406"})}),"\n",(0,l.jsx)(e.h4,{id:"341-\u53d1\u9001\u4fe1\u53f7-1",children:(0,l.jsx)(e.strong,{children:"3.4.1 \u53d1\u9001\u4fe1\u53f7"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"golang.org/x/sys/unix"\n\t"time"\n)\n\nfunc main() {\n\tpid := unix.Getpid()\n\tfmt.Println("\u5f53\u524d\u8fdb\u7a0b ID:", pid)\n\n\tgo func() {\n\t\ttime.Sleep(2 * time.Second)\n\t\tunix.Kill(pid, unix.SIGTERM)\n\t}()\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"35-\u5185\u5b58\u7ba1\u7406-1",children:(0,l.jsx)(e.strong,{children:"3.5 \u5185\u5b58\u7ba1\u7406"})}),"\n",(0,l.jsx)(e.h4,{id:"351-mmap-\u6620\u5c04\u6587\u4ef6-1",children:(0,l.jsxs)(e.strong,{children:["3.5.1 ",(0,l.jsx)(e.code,{children:"mmap"})," \u6620\u5c04\u6587\u4ef6"]})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'package main\n\nimport (\n\t"fmt"\n\t"os"\n\t"golang.org/x/sys/unix"\n\t"unsafe"\n)\n\nfunc main() {\n\tfile, err := os.OpenFile("test.txt", os.O_RDWR, 0666)\n\tif err != nil {\n\t\tfmt.Println("\u6253\u5f00\u6587\u4ef6\u5931\u8d25:", err)\n\t\treturn\n\t}\n\tdefer file.Close()\n\n\tfi, _ := file.Stat()\n\tsize := fi.Size()\n\n\tdata, err := unix.Mmap(int(file.Fd()), 0, int(size), unix.PROT_READ, unix.MAP_SHARED)\n\tif err != nil {\n\t\tfmt.Println("mmap \u5931\u8d25:", err)\n\t\treturn\n\t}\n\n\tfmt.Println("\u6587\u4ef6\u5185\u5bb9:", *(*string)(unsafe.Pointer(&data)))\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"4-unix-\u4f5c\u4e3a-syscall-\u7684\u66ff\u4ee3\u65b9\u6848-1",children:(0,l.jsxs)(e.strong,{children:["4. ",(0,l.jsx)(e.code,{children:"unix"})," \u4f5c\u4e3a ",(0,l.jsx)(e.code,{children:"syscall"})," \u7684\u66ff\u4ee3\u65b9\u6848"]})}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u529f\u80fd"}),(0,l.jsxs)(e.th,{children:[(0,l.jsx)(e.code,{children:"syscall"})," (\u5df2\u5e9f\u5f03)"]}),(0,l.jsxs)(e.th,{children:[(0,l.jsx)(e.code,{children:"x/sys/unix"})," (\u63a8\u8350)"]})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u8fdb\u7a0b\u7ba1\u7406"}),(0,l.jsx)(e.td,{children:"\u2705"}),(0,l.jsx)(e.td,{children:"\u2705"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u6587\u4ef6\u64cd\u4f5c"}),(0,l.jsx)(e.td,{children:"\u2705"}),(0,l.jsx)(e.td,{children:"\u2705"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u4fe1\u53f7\u5904\u7406"}),(0,l.jsx)(e.td,{children:"\u2705"}),(0,l.jsx)(e.td,{children:"\u2705"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u517c\u5bb9\u6027"}),(0,l.jsx)(e.td,{children:"\u274c \u4ec5\u9650 Linux/macOS/Windows"}),(0,l.jsx)(e.td,{children:"\u2705 \u8de8\u5e73\u53f0\u66f4\u597d"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u672a\u6765\u7ef4\u62a4"}),(0,l.jsx)(e.td,{children:"\u274c \u505c\u6b62\u7ef4\u62a4"}),(0,l.jsx)(e.td,{children:"\u2705 \u63a8\u8350\u4f7f\u7528"})]})]})]}),"\n",(0,l.jsxs)(e.p,{children:["\u793a\u4f8b\uff08",(0,l.jsx)(e.code,{children:"x/sys/unix"})," \u66ff\u4ee3 ",(0,l.jsx)(e.code,{children:"syscall"}),"\uff09\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'import "golang.org/x/sys/unix"\n\nfunc main() {\n\tunix.Getpid()  // \u66ff\u4ee3 syscall.Getpid()\n}\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"5-\u7ed3\u8bba-1",children:(0,l.jsx)(e.strong,{children:"5. \u7ed3\u8bba"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsxs)(e.strong,{children:[(0,l.jsx)(e.code,{children:"syscall"})," \u9002\u7528\u4e8e\u4f4e\u7ea7\u7cfb\u7edf\u8c03\u7528"]}),"\uff0c\u4f46\u5df2\u88ab\u5e9f\u5f03\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsxs)(e.strong,{children:["\u5efa\u8bae\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"golang.org/x/sys/unix"})]}),"\uff0c\u56e0\u4e3a ",(0,l.jsx)(e.code,{children:"syscall"})," \u4e0d\u518d\u7ef4\u62a4\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u9002\u7528\u4e8e\u9700\u8981\u76f4\u63a5\u64cd\u4f5c\u7cfb\u7edf\u8d44\u6e90"}),"\uff08\u5982 ",(0,l.jsx)(e.code,{children:"mmap"}),"\u3001",(0,l.jsx)(e.code,{children:"fork"}),"\u3001",(0,l.jsx)(e.code,{children:"exec"}),"\u3001",(0,l.jsx)(e.code,{children:"signal"}),"\uff09\u3002"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u4e0d\u9002\u7528\u4e8e\u4e00\u822c\u5e94\u7528\u5f00\u53d1"}),"\uff0cGo \u63d0\u4f9b\u7684\u6807\u51c6\u5e93 ",(0,l.jsx)(e.code,{children:"os"}),"\u3001",(0,l.jsx)(e.code,{children:"io"}),"\u3001",(0,l.jsx)(e.code,{children:"net"})," \u8db3\u591f\u5927\u591a\u6570\u573a\u666f\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h3,{id:"6-\u53c2\u8003-1",children:(0,l.jsx)(e.strong,{children:"6. \u53c2\u8003"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://pkg.go.dev/golang.org/x/sys/unix",children:"\u5b98\u65b9\u6587\u6863"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/golang/sys",children:"GitHub \u4ee3\u7801\u5e93"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>d,x:()=>t});var s=i(6540);const l={},r=s.createContext(l);function d(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),s.createElement(r.Provider,{value:e},n.children)}}}]);